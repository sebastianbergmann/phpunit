<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:core="https://schemas.opentest4j.org/reporting/core/0.2.0"
           xmlns:phpunit="https://schema.phpunit.de/otr/phpunit/0.1.0"
           targetNamespace="https://schema.phpunit.de/otr/phpunit/0.1.0"
           elementFormDefault="qualified">

    <xs:import schemaLocation="core-0.2.0.xsd" namespace="https://schemas.opentest4j.org/reporting/core/0.2.0"/>

    <xs:element name="classSource">
        <xs:complexType>
            <xs:all>
                <xs:element name="filePosition" type="core:FilePosition" minOccurs="0"/>
            </xs:all>
            <xs:attribute name="className" type="xs:string" use="required"/>
        </xs:complexType>
    </xs:element>

    <xs:element name="methodSource">
        <xs:complexType>
            <xs:attribute name="className"  type="xs:string" use="required"/>
            <xs:attribute name="methodName" type="xs:string" use="required"/>
        </xs:complexType>
    </xs:element>

    <xs:element name="throwable">
        <xs:complexType>
            <xs:simpleContent>
                <xs:extension base="xs:string">
                    <xs:attribute name="type"           type="xs:string"  use="required"/>
                    <xs:attribute name="assertionError" type="xs:boolean" use="required"/>
                </xs:extension>
            </xs:simpleContent>
        </xs:complexType>
    </xs:element>

    <xs:element name="issue">
        <xs:complexType>
            <xs:attribute name="type" use="required">
                <xs:simpleType>
                    <xs:restriction base="xs:string">
                        <xs:enumeration value="error"/>
                        <xs:enumeration value="phpunit-error"/>
                        <xs:enumeration value="deprecation"/>
                        <xs:enumeration value="php-deprecation"/>
                        <xs:enumeration value="phpunit-deprecation"/>
                        <xs:enumeration value="notice"/>
                        <xs:enumeration value="php-notice"/>
                        <xs:enumeration value="phpunit-notice"/>
                        <xs:enumeration value="warning"/>
                        <xs:enumeration value="php-warning"/>
                        <xs:enumeration value="phpunit-warning"/>
                        <xs:enumeration value="risky"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:attribute>
            <xs:attribute name="message"           type="xs:string"          use="required"/>
            <xs:attribute name="file"              type="xs:string"          use="optional"/>
            <xs:attribute name="line"              type="xs:positiveInteger" use="optional"/>
            <xs:attribute name="suppressed"        type="xs:boolean"         use="optional"/>
            <xs:attribute name="ignoredByBaseline" type="xs:boolean"         use="optional"/>
            <xs:attribute name="ignoredByTest"     type="xs:boolean"         use="optional"/>
            <xs:attribute name="trigger"           use="optional">
                <xs:simpleType>
                    <xs:restriction base="xs:string">
                        <xs:enumeration value="self"/>
                        <xs:enumeration value="direct"/>
                        <xs:enumeration value="indirect"/>
                        <xs:enumeration value="unknown"/>
                    </xs:restriction>
                </xs:simpleType>
            </xs:attribute>
            <xs:attribute name="caller" type="phpunit:IssueCode" use="optional"/>
            <xs:attribute name="callee" type="phpunit:IssueCode" use="optional"/>
        </xs:complexType>
    </xs:element>

    <xs:simpleType name="IssueCode">
        <xs:restriction base="xs:string">
            <xs:enumeration value="test code"/>
            <xs:enumeration value="first-party code"/>
            <xs:enumeration value="third-party code"/>
            <xs:enumeration value="PHPUnit"/>
            <xs:enumeration value="PHP runtime"/>
            <xs:enumeration value="unknown"/>
        </xs:restriction>
    </xs:simpleType>
</xs:schema>
